[
  {
    "id": "853eef81-0a9c-46fa-a646-bd0805893a0a",
    "title": "How does this website work",
    "date": "2024-01-06",
    "blocks": [
      {
        "component": "paragraph",
        "text": "In January, I began drafting this article, and now, in July 2023, I realize I've been delaying its completion for quite some time. However, it's important to clarify that my procrastination wasn't centered around the article itself. Instead, it was due to the limited time I had available to address minor bugs in the Preact.js framework."
      },
      {
        "component": "paragraph",
        "text": "Speaking about the website, it operates on a JavaScript framework that I developed. It functions as a single-page application with frontend hash routing, altering the URL with different hashes corresponding to various pages. One might wonder why opt for hash routing. The answer is straightforward: I don't own my server. When I deploy the website on a free-tier Platform as a Service (PaaS), it restricts direct access to other routes, making only the default route accessible through URL search."
      },
      {
        "component": "paragraph",
        "text": "Let's delve into the website's flow:"
      },
      {
        "component": "bulleted_list_item",
        "text": "You visit any domain pointing to this website; currently, it's https://arpitverma.me."
      },
      {
        "component": "bulleted_list_item",
        "text": "The remote server responds with an index.html containing JavaScript files storing content in your browser's session storage."
      },
      {
        "component": "bulleted_list_item",
        "text": "Content is dynamically rendered on the page by retrieving elements from the session storage."
      },
      {
        "component": "bulleted_list_item",
        "text": "When navigating to another route, a URL check system invokes the JavaScript responsible for that page's content."
      },
      {
        "component": "bulleted_list_item",
        "text": "The logic and dynamic aspects of the page are implemented separately. As JavaScript stored in session storage cannot perform logic functions, it's used solely to call upon variables."
      },
      {
        "component": "bulleted_list_item",
        "text": "For the logic part, when a page is called, a corresponding logic script is linked in the index.html."
      },
      {
        "component": "bulleted_list_item",
        "text": "The projects page has a unique approach. Since I don't update projects constantly, maintaining a server to host an API for the project page is inefficient. Instead, I hardcode it into the repository."
      },
      {
        "component": "bulleted_list_item",
        "text": "To streamline the hardcoding process, I developed a Node.js-based automation script called gitcron. This script fetches project details from a Google Sheet that I maintain, commits the details to the repository of the website, and there you have itâ€”the website is up and running!"
      },
      {
        "component": "code",
        "text": "async function fetchProjects(){\n    let blogDatabase = []\n    await fetch('../../data/content.json')\n        .then((response) => response.json())\n        .then((json) => blogDatabase=json);\n\n    let ProjectsFetch = ''\n\n\n    for(let i =0;i<blogDatabase.length;i++){\n        let content =``\n        let number = 1\n        for(let j=0;j<blogDatabase[i].blocks.length;j++){\n            let el = blogDatabase[i].blocks[j]\n            switch (el.component) {\n                case \"paragraph\":\n                    content = content + el.text + '<br><br>'\n                    break;\n                case \"bulleted_list_item\":\n                    content = content +'&#149; ' + el.text + '<br>'\n                    break;\n                case \"numbered_list_item\":\n                    content = content + '' + `${number}. ` + el.text + '<br>'\n                    number +=1\n                    break;\n                case \"code\":\n                    code_text = el.text .replace(/\\\\/g, '\"\"') // Replace \\ with \"\"\n                                        .replace(/\\n/g, '<br>') // Replace \\n with <br>\n                                        .replace(/\\t/g, '&nbsp;&nbsp;&nbsp;&nbsp;'); // Replace \\t with HTML tab space\n                    content = content+ '<div class=\"code_block\">' + code_text +'</div>'+ '<br>'\n                    break;\n            \n                default:\n                    break;\n            }\n        }\n        const projectObj = `\n            <div class=\"content\">\n                <p class=\"subHead\">${blogDatabase[i].title}</p>\n                <p class=\"paragraph\">${content}</p>\n                <p class=\"highlight\">\n                Dated :\n                    <span class=\"paragraph\">${blogDatabase[i].date}</span> \n\n                </p>\n            </div>\n    `\n        ProjectsFetch = ProjectsFetch + projectObj ; \n    }\n    console.log(blogDatabase)\n    return ProjectsFetch\n}\nfetchProjects().then((res)=>{\n    document.getElementById(\"blog\").innerHTML =  res\n})"
      }
    ]
  }
]